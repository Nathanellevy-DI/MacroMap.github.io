(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var a=e.i(43476),r=e.i(71645);function s({onAnalyze:e,isLoading:s}){let[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[i?(0,a.jsxs)("div",{className:"w-full max-w-sm space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium text-sm text-gray-400",children:"Ingredient List"}),(0,a.jsx)("button",{onClick:()=>{o(!1),n("")},className:"text-xs text-gray-500 hover:text-gray-300 transition-colors",children:"Cancel"})]}),(0,a.jsx)("textarea",{value:t,onChange:e=>n(e.target.value),placeholder:"Paste or type the ingredient list here...  Example: Water, Sugar, Corn Syrup, Red 40, Yellow 5...",rows:8,autoFocus:!0,className:"w-full px-4 py-3 rounded-xl bg-gray-900 border border-gray-700 focus:border-emerald-500 focus:outline-none text-white placeholder-gray-500 resize-none text-sm leading-relaxed"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"We'll check for ingredients banned or restricted in the EU"}),(0,a.jsx)("button",{onClick:()=>{t.trim()&&e(t)},disabled:s||!t.trim(),className:"btn-primary w-full",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Analyzing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Analyze Ingredients"]})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"camera-container gradient-border",children:[(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center gap-6 p-8 text-center",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center float",children:(0,a.jsx)("svg",{className:"w-12 h-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-300 font-medium mb-1",children:"Paste Ingredient List"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Copy ingredients from a food label"})]})]}),(0,a.jsx)("div",{className:"camera-overlay"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 w-full max-w-sm",children:[(0,a.jsxs)("button",{onClick:()=>o(!0),className:"btn-primary pulse-glow",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Enter Ingredients"]}),(0,a.jsx)("button",{onClick:()=>{n("Water, High Fructose Corn Syrup, Citric Acid, Natural Flavors, Potassium Bromate, Red 40, Yellow 5, Titanium Dioxide, BHA, Sodium Benzoate"),o(!0)},className:"btn-secondary text-sm",children:"Try Sample (with Red Flags)"})]})]}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-600 mt-4",children:"‚úì No API key required ‚Ä¢ Instant local analysis"})]})}function t({score:e}){let r=2*Math.PI*54,s=()=>e>=70?"#22c55e":e>=40?"#f59e0b":"#ef4444";return(0,a.jsxs)("div",{className:"relative w-40 h-40",children:[(0,a.jsxs)("svg",{className:"score-ring w-full h-full",viewBox:"0 0 120 120",children:[(0,a.jsx)("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:"rgba(255,255,255,0.05)",strokeWidth:"10"}),(0,a.jsx)("circle",{cx:"60",cy:"60",r:54,fill:"none",stroke:s(),strokeWidth:"10",strokeLinecap:"round",strokeDasharray:r,strokeDashoffset:r-e/100*r,style:{transition:"stroke-dashoffset 1.5s ease-out"}})]}),(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,a.jsx)("span",{className:"text-4xl font-bold",style:{color:s()},children:e}),(0,a.jsx)("span",{className:"text-xs text-gray-400 uppercase tracking-wider",children:e>=70?"Safe":e>=40?"Caution":"Risk"})]})]})}function n({score:e,redFlags:r,allIngredients:s,onReset:n}){return(0,a.jsxs)("div",{className:"w-full max-w-lg mx-auto space-y-6 fade-in",children:[(0,a.jsxs)("div",{className:"glass-card p-8 flex flex-col items-center gap-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-300",children:"Safety Score"}),(0,a.jsx)(t,{score:e}),(0,a.jsx)("p",{className:"text-sm text-gray-400 text-center max-w-xs",children:e>=70?"This product appears to meet EU safety standards.":e>=40?"Some ingredients may need attention. Check the flags below.":"This product contains ingredients banned in the EU."})]}),r.length>0&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full bg-red-500 animate-pulse"}),"Red Flags (",r.length,")"]}),r.map((e,r)=>(0,a.jsxs)("div",{className:"red-flag-card fade-in",style:{animationDelay:`${.1*r}s`},children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsx)("h4",{className:"font-semibold text-red-400 text-lg",children:e.name}),(0,a.jsx)("span",{className:"text-xs px-3 py-1.5 rounded-full bg-red-500/20 text-red-400 font-medium",children:e.euStatus})]}),(0,a.jsx)("p",{className:"text-sm text-gray-300 leading-relaxed",children:e.risk}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-3 pt-3 border-t border-red-500/10",children:["Found as: ",(0,a.jsxs)("span",{className:"text-gray-400 font-medium",children:['"',e.foundAs,'"']})]})]},r))]}),0===r.length&&(0,a.jsxs)("div",{className:"safe-card flex items-center gap-5",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-green-500/20 flex items-center justify-center shrink-0",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-green-400 text-lg",children:"All Clear!"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"No banned ingredients detected in this product."})]})]}),s.length>0&&(0,a.jsxs)("div",{className:"glass-card p-5",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-400 mb-4",children:["All Ingredients (",s.length,")"]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map((e,s)=>{let t=r.some(a=>e.toLowerCase().includes(a.foundAs.toLowerCase()));return(0,a.jsxs)("span",{className:`ingredient-chip ${t?"flagged":"safe"}`,children:[t&&(0,a.jsx)("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e]},s)})})]}),(0,a.jsxs)("button",{onClick:n,className:"btn-primary w-full",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Analyze Another Product"]}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-600",children:"Based on EU 2026 food safety regulations"})]})}async function i(e){try{let a=await fetch(`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(e)}&search_simple=1&action=process&json=1&page_size=10`);if(!a.ok)throw Error("Failed to search foods");return(await a.json()).products.filter(e=>e.nutriments).map(e=>{let a=e.nutriments;return{name:e.product_name||"Unknown Product",brand:e.brands||void 0,servingSize:e.serving_size||"100g",calories:Math.round(a["energy-kcal_100g"]||a["energy-kcal"]||0),protein:Math.round(10*(a.proteins_100g||a.proteins||0))/10,carbs:Math.round(10*(a.carbohydrates_100g||a.carbohydrates||0))/10,fat:Math.round(10*(a.fat_100g||a.fat||0))/10,fiber:a.fiber_100g||a.fiber,sugar:a.sugars_100g||a.sugars,sodium:a.sodium_100g||a.sodium,image:e.image_small_url||e.image_url}}).slice(0,10)}catch(e){throw console.error("Open Food Facts API error:",e),e}}async function o(e){try{let a=await fetch(`https://world.openfoodfacts.org/api/v0/product/${e}.json`);if(!a.ok)throw Error("Failed to fetch product");let r=await a.json();if(1!==r.status||!r.product)return null;let s=r.product,t=s.nutriments||{};return{name:s.product_name||"Unknown Product",brand:s.brands||void 0,servingSize:s.serving_size||"100g",calories:Math.round(t["energy-kcal_100g"]||t["energy-kcal"]||0),protein:Math.round(10*(t.proteins_100g||t.proteins||0))/10,carbs:Math.round(10*(t.carbohydrates_100g||t.carbohydrates||0))/10,fat:Math.round(10*(t.fat_100g||t.fat||0))/10,fiber:t.fiber_100g||t.fiber,sugar:t.sugars_100g||t.sugars,sodium:t.sodium_100g||t.sodium,image:s.image_small_url||s.image_url}}catch(e){return console.error("Barcode lookup error:",e),null}}let c={tomato:{name:"Tomato",servingSize:"1 medium (123g)",calories:22,protein:1.1,carbs:4.8,fat:.2,fiber:1.5,sugar:3.2},olive_oil:{name:"Olive Oil",servingSize:"1 tbsp (14g)",calories:119,protein:0,carbs:0,fat:13.5},chicken_breast:{name:"Chicken Breast",servingSize:"100g",calories:165,protein:31,carbs:0,fat:3.6},rice:{name:"White Rice (cooked)",servingSize:"1 cup (158g)",calories:206,protein:4.3,carbs:45,fat:.4,fiber:.6},egg:{name:"Egg",servingSize:"1 large (50g)",calories:72,protein:6.3,carbs:.4,fat:4.8},banana:{name:"Banana",servingSize:"1 medium (118g)",calories:105,protein:1.3,carbs:27,fat:.4,fiber:3.1,sugar:14},avocado:{name:"Avocado",servingSize:"1/2 fruit (100g)",calories:160,protein:2,carbs:8.5,fat:15,fiber:7},salmon:{name:"Salmon",servingSize:"100g",calories:208,protein:20,carbs:0,fat:13},broccoli:{name:"Broccoli",servingSize:"1 cup (91g)",calories:31,protein:2.5,carbs:6,fat:.3,fiber:2.4},potato:{name:"Potato",servingSize:"1 medium (150g)",calories:163,protein:4.3,carbs:37,fat:.2,fiber:3.8}},l=[{name:"McDonald's",logo:"üçü",color:"#FFC107",items:[{name:"Big Mac",category:"Burgers",calories:550,protein:25,carbs:45,fat:30},{name:"Quarter Pounder with Cheese",category:"Burgers",calories:520,protein:30,carbs:42,fat:26},{name:"McChicken",category:"Burgers",calories:400,protein:14,carbs:40,fat:21},{name:"Filet-O-Fish",category:"Burgers",calories:390,protein:16,carbs:39,fat:19},{name:"Chicken McNuggets (10pc)",category:"Chicken",calories:420,protein:25,carbs:26,fat:25},{name:"Medium Fries",category:"Sides",calories:320,protein:5,carbs:43,fat:15},{name:"Large Fries",category:"Sides",calories:480,protein:7,carbs:64,fat:23},{name:"McFlurry Oreo",category:"Desserts",calories:510,protein:11,carbs:80,fat:17},{name:"Egg McMuffin",category:"Breakfast",calories:310,protein:17,carbs:30,fat:13},{name:"Sausage McMuffin with Egg",category:"Breakfast",calories:480,protein:21,carbs:30,fat:31},{name:"Hash Browns",category:"Breakfast",calories:150,protein:1,carbs:15,fat:9},{name:"Medium Coca-Cola",category:"Drinks",calories:210,protein:0,carbs:58,fat:0}]},{name:"Burger King",logo:"üçî",color:"#FF5722",items:[{name:"Whopper",category:"Burgers",calories:657,protein:28,carbs:49,fat:40},{name:"Whopper with Cheese",category:"Burgers",calories:740,protein:32,carbs:50,fat:46},{name:"Double Whopper",category:"Burgers",calories:900,protein:47,carbs:49,fat:56},{name:"Bacon King",category:"Burgers",calories:1150,protein:61,carbs:49,fat:79},{name:"Chicken Fries (9pc)",category:"Chicken",calories:280,protein:14,carbs:17,fat:17},{name:"Chicken Nuggets (8pc)",category:"Chicken",calories:310,protein:16,carbs:16,fat:20},{name:"Medium Fries",category:"Sides",calories:380,protein:5,carbs:53,fat:17},{name:"Onion Rings (medium)",category:"Sides",calories:410,protein:5,carbs:46,fat:23},{name:"Croissan'wich Sausage Egg Cheese",category:"Breakfast",calories:520,protein:19,carbs:27,fat:37}]},{name:"Wendy's",logo:"ü•§",color:"#E53935",items:[{name:"Dave's Single",category:"Burgers",calories:590,protein:30,carbs:42,fat:34},{name:"Dave's Double",category:"Burgers",calories:850,protein:49,carbs:43,fat:53},{name:"Baconator",category:"Burgers",calories:950,protein:57,carbs:40,fat:62},{name:"Spicy Chicken Sandwich",category:"Chicken",calories:500,protein:29,carbs:49,fat:20},{name:"10pc Chicken Nuggets",category:"Chicken",calories:450,protein:22,carbs:29,fat:27},{name:"Medium Fries",category:"Sides",calories:420,protein:5,carbs:52,fat:21},{name:"Chili (Large)",category:"Sides",calories:330,protein:25,carbs:30,fat:12},{name:"Frosty (Medium)",category:"Desserts",calories:470,protein:11,carbs:76,fat:13},{name:"Breakfast Baconator",category:"Breakfast",calories:730,protein:35,carbs:34,fat:50}]},{name:"Subway",logo:"ü•™",color:"#4CAF50",items:[{name:'6" Italian B.M.T.',category:"Subs",calories:410,protein:21,carbs:44,fat:17},{name:'6" Turkey Breast',category:"Subs",calories:280,protein:18,carbs:46,fat:3},{name:'6" Chicken Teriyaki',category:"Subs",calories:340,protein:26,carbs:47,fat:4},{name:'6" Meatball Marinara',category:"Subs",calories:480,protein:22,carbs:52,fat:20},{name:'6" Tuna',category:"Subs",calories:480,protein:20,carbs:43,fat:25},{name:'6" Veggie Delite',category:"Subs",calories:230,protein:9,carbs:44,fat:2},{name:"Footlong Italian B.M.T.",category:"Subs",calories:820,protein:42,carbs:88,fat:34},{name:"Cookies (2)",category:"Desserts",calories:400,protein:4,carbs:56,fat:18}]},{name:"Chick-fil-A",logo:"üêî",color:"#E53935",items:[{name:"Chick-fil-A Chicken Sandwich",category:"Chicken",calories:440,protein:29,carbs:40,fat:18},{name:"Spicy Chicken Sandwich",category:"Chicken",calories:460,protein:29,carbs:42,fat:19},{name:"Grilled Chicken Sandwich",category:"Chicken",calories:320,protein:28,carbs:36,fat:6},{name:"Chicken Nuggets (12pc)",category:"Chicken",calories:380,protein:40,carbs:16,fat:18},{name:"Waffle Fries (Medium)",category:"Sides",calories:420,protein:5,carbs:45,fat:24},{name:"Chicken Biscuit",category:"Breakfast",calories:460,protein:18,carbs:44,fat:23},{name:"Hash Brown Scramble Bowl",category:"Breakfast",calories:460,protein:23,carbs:24,fat:30},{name:"Frosted Lemonade",category:"Drinks",calories:330,protein:6,carbs:64,fat:6}]},{name:"Taco Bell",logo:"üåÆ",color:"#7B1FA2",items:[{name:"Crunchy Taco",category:"Tacos",calories:170,protein:8,carbs:13,fat:10},{name:"Soft Taco",category:"Tacos",calories:180,protein:9,carbs:18,fat:9},{name:"Crunchwrap Supreme",category:"Specialties",calories:530,protein:16,carbs:55,fat:21},{name:"Chalupa Supreme - Beef",category:"Specialties",calories:350,protein:14,carbs:30,fat:21},{name:"Quesadilla - Chicken",category:"Specialties",calories:510,protein:27,carbs:37,fat:27},{name:"Burrito Supreme - Beef",category:"Burritos",calories:400,protein:15,carbs:51,fat:14},{name:"Bean Burrito",category:"Burritos",calories:380,protein:13,carbs:55,fat:11},{name:"Nachos BellGrande",category:"Sides",calories:740,protein:16,carbs:80,fat:39},{name:"Cinnamon Twists",category:"Desserts",calories:170,protein:1,carbs:26,fat:6}]},{name:"KFC",logo:"üçó",color:"#C62828",items:[{name:"Original Recipe Chicken Breast",category:"Chicken",calories:390,protein:39,carbs:11,fat:21},{name:"Original Recipe Chicken Thigh",category:"Chicken",calories:280,protein:19,carbs:8,fat:19},{name:"Extra Crispy Chicken Breast",category:"Chicken",calories:530,protein:39,carbs:16,fat:35},{name:"Popcorn Chicken (Large)",category:"Chicken",calories:620,protein:31,carbs:36,fat:38},{name:"Mashed Potatoes & Gravy",category:"Sides",calories:130,protein:2,carbs:18,fat:5},{name:"Cole Slaw",category:"Sides",calories:170,protein:1,carbs:14,fat:12},{name:"Mac & Cheese",category:"Sides",calories:140,protein:5,carbs:16,fat:6},{name:"Biscuit",category:"Sides",calories:180,protein:4,carbs:22,fat:8}]},{name:"Chipotle",logo:"üåØ",color:"#795548",items:[{name:"Chicken Burrito",category:"Burritos",calories:1070,protein:59,carbs:105,fat:42},{name:"Steak Burrito",category:"Burritos",calories:1040,protein:54,carbs:104,fat:40},{name:"Carnitas Burrito",category:"Burritos",calories:1070,protein:53,carbs:105,fat:44},{name:"Chicken Bowl",category:"Bowls",calories:745,protein:46,carbs:51,fat:36},{name:"Steak Bowl",category:"Bowls",calories:715,protein:41,carbs:50,fat:34},{name:"Chicken Tacos (3)",category:"Tacos",calories:615,protein:39,carbs:39,fat:27},{name:"Chips & Guacamole",category:"Sides",calories:770,protein:9,carbs:63,fat:53},{name:"Chips & Queso",category:"Sides",calories:750,protein:16,carbs:64,fat:47}]},{name:"Pizza Hut",logo:"üçï",color:"#D32F2F",items:[{name:"Pepperoni Pizza (1 slice Medium)",category:"Pizza",calories:250,protein:11,carbs:28,fat:11},{name:"Cheese Pizza (1 slice Medium)",category:"Pizza",calories:220,protein:10,carbs:28,fat:8},{name:"Meat Lover's (1 slice Medium)",category:"Pizza",calories:320,protein:14,carbs:28,fat:17},{name:"Supreme (1 slice Medium)",category:"Pizza",calories:280,protein:12,carbs:29,fat:13},{name:"Breadsticks (2)",category:"Sides",calories:290,protein:8,carbs:41,fat:11},{name:"Garlic Knots (4)",category:"Sides",calories:340,protein:8,carbs:46,fat:14},{name:"Bone-Out Wings (4)",category:"Wings",calories:280,protein:19,carbs:12,fat:17},{name:"Cinnamon Sticks",category:"Desserts",calories:460,protein:6,carbs:72,fat:16}]},{name:"Starbucks",logo:"‚òï",color:"#00695C",items:[{name:"Caffe Latte (Grande)",category:"Coffee",calories:190,protein:13,carbs:19,fat:7},{name:"Cappuccino (Grande)",category:"Coffee",calories:140,protein:10,carbs:14,fat:5},{name:"Caramel Frappuccino (Grande)",category:"Frappuccinos",calories:370,protein:5,carbs:54,fat:14},{name:"Mocha Frappuccino (Grande)",category:"Frappuccinos",calories:370,protein:6,carbs:52,fat:15},{name:"Vanilla Sweet Cream Cold Brew (Grande)",category:"Cold Brew",calories:200,protein:2,carbs:26,fat:11},{name:"Bacon, Gouda & Egg Sandwich",category:"Breakfast",calories:360,protein:19,carbs:34,fat:16},{name:"Sausage, Cheddar & Egg Sandwich",category:"Breakfast",calories:480,protein:17,carbs:36,fat:29},{name:"Chocolate Croissant",category:"Bakery",calories:340,protein:6,carbs:39,fat:17},{name:"Blueberry Muffin",category:"Bakery",calories:360,protein:5,carbs:52,fat:15}]}],m=[{name:"Beef Steak (Ribeye)",category:"Meat",emoji:"ü•©",per100g:{calories:291,protein:24,carbs:0,fat:21},commonServings:[{name:"Small (6oz)",grams:170},{name:"Medium (8oz)",grams:227},{name:"Large (12oz)",grams:340}]},{name:"Beef Steak (Sirloin)",category:"Meat",emoji:"ü•©",per100g:{calories:183,protein:27,carbs:0,fat:8},commonServings:[{name:"Small (6oz)",grams:170},{name:"Medium (8oz)",grams:227},{name:"Large (12oz)",grams:340}]},{name:"Chicken Breast",category:"Meat",emoji:"üçó",per100g:{calories:165,protein:31,carbs:0,fat:3.6},commonServings:[{name:"Small breast",grams:115},{name:"Medium breast",grams:170},{name:"Large breast",grams:225}]},{name:"Chicken Thigh",category:"Meat",emoji:"üçó",per100g:{calories:209,protein:26,carbs:0,fat:10.9},commonServings:[{name:"1 thigh",grams:110},{name:"2 thighs",grams:220}]},{name:"Ground Beef (80/20)",category:"Meat",emoji:"ü•©",per100g:{calories:254,protein:17,carbs:0,fat:20},commonServings:[{name:"Quarter pounder",grams:113},{name:"Half pound",grams:227}]},{name:"Ground Turkey",category:"Meat",emoji:"ü¶É",per100g:{calories:149,protein:20,carbs:0,fat:7},commonServings:[{name:"1/4 lb patty",grams:113},{name:"1/2 lb",grams:227}]},{name:"Pork Chop",category:"Meat",emoji:"ü•©",per100g:{calories:231,protein:25,carbs:0,fat:14},commonServings:[{name:"Medium chop",grams:150},{name:"Large chop",grams:200}]},{name:"Bacon",category:"Meat",emoji:"ü•ì",per100g:{calories:541,protein:37,carbs:1.4,fat:42},commonServings:[{name:"2 slices",grams:16},{name:"4 slices",grams:32}]},{name:"Salmon",category:"Fish",emoji:"üêü",per100g:{calories:208,protein:20,carbs:0,fat:13},commonServings:[{name:"Small fillet",grams:100},{name:"Medium fillet",grams:170},{name:"Large fillet",grams:225}]},{name:"Tuna (canned)",category:"Fish",emoji:"üêü",per100g:{calories:116,protein:26,carbs:0,fat:1},commonServings:[{name:"1 can (drained)",grams:112}]},{name:"Shrimp",category:"Seafood",emoji:"ü¶ê",per100g:{calories:99,protein:24,carbs:0,fat:.3},commonServings:[{name:"6 large shrimp",grams:84},{name:"10 medium shrimp",grams:100}]},{name:"Egg (whole)",category:"Eggs & Dairy",emoji:"ü•ö",per100g:{calories:155,protein:13,carbs:1.1,fat:11},commonServings:[{name:"1 large egg",grams:50},{name:"2 large eggs",grams:100},{name:"3 large eggs",grams:150}]},{name:"Greek Yogurt",category:"Eggs & Dairy",emoji:"ü•õ",per100g:{calories:59,protein:10,carbs:3.6,fat:.7},commonServings:[{name:"1 cup",grams:245},{name:"1/2 cup",grams:122}]},{name:"Cheese (Cheddar)",category:"Eggs & Dairy",emoji:"üßÄ",per100g:{calories:403,protein:25,carbs:1.3,fat:33},commonServings:[{name:"1 slice",grams:28},{name:"1 oz",grams:28}]},{name:"Broccoli",category:"Vegetables",emoji:"ü•¶",per100g:{calories:34,protein:2.8,carbs:7,fat:.4,fiber:2.6},commonServings:[{name:"1 cup chopped",grams:91},{name:"1 medium stalk",grams:148}]},{name:"Spinach",category:"Vegetables",emoji:"ü•¨",per100g:{calories:23,protein:2.9,carbs:3.6,fat:.4,fiber:2.2},commonServings:[{name:"1 cup raw",grams:30},{name:"1 cup cooked",grams:180}]},{name:"Sweet Potato",category:"Vegetables",emoji:"üç†",per100g:{calories:86,protein:1.6,carbs:20,fat:.1,fiber:3},commonServings:[{name:"Medium potato",grams:114},{name:"Large potato",grams:180}]},{name:"Potato (white)",category:"Vegetables",emoji:"ü•î",per100g:{calories:77,protein:2,carbs:17,fat:.1,fiber:2.2},commonServings:[{name:"Medium potato",grams:150},{name:"Large potato",grams:300}]},{name:"Avocado",category:"Vegetables",emoji:"ü•ë",per100g:{calories:160,protein:2,carbs:8.5,fat:15,fiber:7},commonServings:[{name:"1/2 avocado",grams:100},{name:"1 whole avocado",grams:200}]},{name:"Tomato",category:"Vegetables",emoji:"üçÖ",per100g:{calories:18,protein:.9,carbs:3.9,fat:.2,fiber:1.2},commonServings:[{name:"1 medium tomato",grams:123},{name:"1 cup cherry tomatoes",grams:149}]},{name:"Banana",category:"Fruits",emoji:"üçå",per100g:{calories:89,protein:1.1,carbs:23,fat:.3,fiber:2.6},commonServings:[{name:"Medium banana",grams:118},{name:"Large banana",grams:136}]},{name:"Apple",category:"Fruits",emoji:"üçé",per100g:{calories:52,protein:.3,carbs:14,fat:.2,fiber:2.4},commonServings:[{name:"Medium apple",grams:182},{name:"Large apple",grams:223}]},{name:"Orange",category:"Fruits",emoji:"üçä",per100g:{calories:47,protein:.9,carbs:12,fat:.1,fiber:2.4},commonServings:[{name:"Medium orange",grams:131}]},{name:"Strawberries",category:"Fruits",emoji:"üçì",per100g:{calories:32,protein:.7,carbs:7.7,fat:.3,fiber:2},commonServings:[{name:"1 cup",grams:152},{name:"8 medium berries",grams:100}]},{name:"Blueberries",category:"Fruits",emoji:"ü´ê",per100g:{calories:57,protein:.7,carbs:14,fat:.3,fiber:2.4},commonServings:[{name:"1 cup",grams:148}]},{name:"White Rice (cooked)",category:"Grains",emoji:"üçö",per100g:{calories:130,protein:2.7,carbs:28,fat:.3},commonServings:[{name:"1/2 cup",grams:93},{name:"1 cup",grams:186}]},{name:"Brown Rice (cooked)",category:"Grains",emoji:"üçö",per100g:{calories:112,protein:2.6,carbs:23,fat:.9,fiber:1.8},commonServings:[{name:"1/2 cup",grams:98},{name:"1 cup",grams:195}]},{name:"Pasta (cooked)",category:"Grains",emoji:"üçù",per100g:{calories:131,protein:5,carbs:25,fat:1.1},commonServings:[{name:"1 cup",grams:140},{name:"2 cups",grams:280}]},{name:"Bread (white)",category:"Grains",emoji:"üçû",per100g:{calories:265,protein:9,carbs:49,fat:3.2},commonServings:[{name:"1 slice",grams:30},{name:"2 slices",grams:60}]},{name:"Oatmeal (cooked)",category:"Grains",emoji:"ü•£",per100g:{calories:71,protein:2.5,carbs:12,fat:1.5,fiber:1.7},commonServings:[{name:"1 cup",grams:234},{name:"1/2 cup",grams:117}]},{name:"Olive Oil",category:"Oils",emoji:"ü´í",per100g:{calories:884,protein:0,carbs:0,fat:100},commonServings:[{name:"1 tbsp",grams:14},{name:"1 tsp",grams:5}]},{name:"Butter",category:"Oils",emoji:"üßà",per100g:{calories:717,protein:.9,carbs:.1,fat:81},commonServings:[{name:"1 tbsp",grams:14},{name:"1 pat",grams:5}]},{name:"Peanut Butter",category:"Oils",emoji:"ü•ú",per100g:{calories:588,protein:25,carbs:20,fat:50,fiber:6},commonServings:[{name:"1 tbsp",grams:16},{name:"2 tbsp",grams:32}]},{name:"Almonds",category:"Nuts",emoji:"üå∞",per100g:{calories:579,protein:21,carbs:22,fat:50,fiber:12},commonServings:[{name:"1/4 cup",grams:36},{name:"1 oz (23 almonds)",grams:28}]},{name:"Walnuts",category:"Nuts",emoji:"üå∞",per100g:{calories:654,protein:15,carbs:14,fat:65,fiber:7},commonServings:[{name:"1/4 cup",grams:30},{name:"1 oz",grams:28}]}];function d({value:e,max:r,color:s,label:t}){let n=Math.min(e/r*100,100),i=2*Math.PI*28;return(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative w-16 h-16",children:[(0,a.jsxs)("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 64 64",children:[(0,a.jsx)("circle",{cx:"32",cy:"32",r:28,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"4"}),(0,a.jsx)("circle",{cx:"32",cy:"32",r:28,fill:"none",stroke:s,strokeWidth:"4",strokeLinecap:"round",strokeDasharray:i,strokeDashoffset:i-n/100*i,style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,a.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold",children:Math.round(e)})})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:t})]})}function g({totals:e}){return(0,a.jsxs)("div",{className:"glass-card p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold",children:Math.round(e.calories)}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Calories"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d,{value:e.protein,max:150,color:"#22c55e",label:"Protein"}),(0,a.jsx)(d,{value:e.carbs,max:250,color:"#3b82f6",label:"Carbs"}),(0,a.jsx)(d,{value:e.fat,max:65,color:"#f59e0b",label:"Fat"})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:[{name:"P",value:e.protein,max:150,color:"#22c55e"},{name:"C",value:e.carbs,max:250,color:"#3b82f6"},{name:"F",value:e.fat,max:65,color:"#f59e0b"}].map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs w-4 text-gray-500",children:e.name}),(0,a.jsx)("div",{className:"flex-1 macro-bar",children:(0,a.jsx)("div",{className:"macro-bar-fill",style:{width:`${Math.min(e.value/e.max*100,100)}%`,background:e.color}})}),(0,a.jsxs)("span",{className:"text-xs w-12 text-right text-gray-400",children:[e.value.toFixed(0),"g"]})]},e.name))})]})}function x({item:e,onRemove:r}){return(0,a.jsxs)("div",{className:"glass-card p-3 flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm truncate",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.servingSize})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs shrink-0",children:[(0,a.jsxs)("span",{className:"text-emerald-400",children:[e.protein,"g"]}),(0,a.jsxs)("span",{className:"text-blue-400",children:[e.carbs,"g"]}),(0,a.jsxs)("span",{className:"text-amber-400",children:[e.fat,"g"]}),(0,a.jsx)("span",{className:"font-semibold",children:e.calories})]}),(0,a.jsx)("button",{onClick:r,className:"p-1.5 text-gray-500 hover:text-red-400",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}function u({restaurant:e,onAdd:r,onClose:s}){let t=[...new Set(e.items.map(e=>e.category))];return(0,a.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,a.jsxs)("div",{className:"modal-content slide-up",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:e.logo}),(0,a.jsx)("h3",{className:"text-lg font-bold",children:e.name})]}),(0,a.jsx)("button",{onClick:s,className:"icon-btn",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto",children:t.map(s=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:s}),(0,a.jsx)("div",{className:"space-y-2",children:e.items.filter(e=>e.category===s).map((e,s)=>(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full glass-card p-3 text-left hover:bg-white/5 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex gap-2 mt-1 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.calories," cal"]}),(0,a.jsxs)("span",{className:"text-emerald-400",children:[e.protein,"g P"]}),(0,a.jsxs)("span",{className:"text-blue-400",children:[e.carbs,"g C"]}),(0,a.jsxs)("span",{className:"text-amber-400",children:[e.fat,"g F"]})]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]},s))})]},s))})]})})}function h({food:e,onAdd:s,onClose:t}){let[n,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("g"),[l,m]=(0,r.useState)(null),d=(()=>{if(l){let a=e.commonServings.find(e=>e.name===l);return a?.grams||100}let a=parseFloat(n)||0;switch(o){case"oz":return Math.round(28.3495*a);case"lbs":return Math.round(453.592*a);case"kg":return Math.round(1e3*a);default:return a}})(),g=function(e,a){let r;if("number"==typeof a)r=a;else{let s=e.commonServings.find(e=>e.name===a);r=s?.grams||100}let s=r/100;return{calories:Math.round(e.per100g.calories*s),protein:Math.round(e.per100g.protein*s*10)/10,carbs:Math.round(e.per100g.carbs*s*10)/10,fat:Math.round(e.per100g.fat*s*10)/10,fiber:e.per100g.fiber?Math.round(e.per100g.fiber*s*10)/10:void 0}}(e,d);return(0,a.jsx)("div",{className:"modal-overlay",onClick:t,children:(0,a.jsxs)("div",{className:"modal-content slide-up",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.category})]})]}),(0,a.jsx)("button",{onClick:t,className:"icon-btn",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Quick Servings"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.commonServings.map(e=>(0,a.jsx)("button",{onClick:()=>{m(e.name),i("")},className:`px-3 py-2 rounded-lg text-sm transition-all ${l===e.name?"bg-emerald-500 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:e.name},e.name))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Or enter weight"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"number",value:n,onChange:e=>{i(e.target.value),m(null)},placeholder:"Amount",className:"flex-1"}),(0,a.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-20",children:[(0,a.jsx)("option",{value:"g",children:"g"}),(0,a.jsx)("option",{value:"oz",children:"oz"}),(0,a.jsx)("option",{value:"lbs",children:"lbs"}),(0,a.jsx)("option",{value:"kg",children:"kg"})]})]})]}),(0,a.jsxs)("div",{className:"glass-card p-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center mb-3",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-emerald-400",children:g.calories}),(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"cal"})]}),(0,a.jsxs)("div",{className:"flex justify-around text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-emerald-400",children:[g.protein,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Protein"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-blue-400",children:[g.carbs,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Carbs"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-amber-400",children:[g.fat,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Fat"})]})]})]}),(0,a.jsx)("button",{onClick:()=>{d<=0||s({id:Date.now().toString(),name:e.name,servingSize:l||`${d}g`,calories:g.calories,protein:g.protein,carbs:g.carbs,fat:g.fat,fiber:g.fiber,timestamp:Date.now()})},disabled:d<=0,className:"btn-primary",children:"Add to Meal"})]})})}function p({onBack:e}){let[s,t]=(0,r.useState)([]),[n,d]=(0,r.useState)("search"),[p,f]=(0,r.useState)(""),[b,j]=(0,r.useState)([]),[y,v]=(0,r.useState)([]),[k,N]=(0,r.useState)([]),[w,S]=(0,r.useState)(!1),[C,B]=(0,r.useState)(null),[M,L]=(0,r.useState)(null),[z,F]=(0,r.useState)(""),E=(0,r.useRef)(null),P=s.reduce((e,a)=>({calories:e.calories+a.calories,protein:e.protein+a.protein,carbs:e.carbs+a.carbs,fat:e.fat+a.fat,fiber:e.fiber+(a.fiber||0),sugar:e.sugar+(a.sugar||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0}),T=(0,r.useCallback)(async(e,a)=>{if(f(e),E.current&&clearTimeout(E.current),e.length<2){j([]),v([]),N([]);return}E.current=setTimeout(async()=>{S(!0);try{if("search"===a){let a=function(e){let a=e.toLowerCase().trim();for(let[e,r]of Object.entries(c))if(e.includes(a)||a.includes(e)||r.name.toLowerCase().includes(a))return r;return null}(e),r=await i(e);j(a?[a,...r]:r)}else if("restaurant"===a)v(function(e){let a=e.toLowerCase().trim(),r=[];for(let e of l){if(e.name.toLowerCase().includes(a)){r.push({restaurant:e,items:e.items.slice(0,8)});continue}let s=e.items.filter(e=>e.name.toLowerCase().includes(a)||e.category.toLowerCase().includes(a));s.length>0&&r.push({restaurant:e,items:s})}return r}(e));else{let r;"custom"===a&&N((r=e.toLowerCase().trim(),m.filter(e=>e.name.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)).slice(0,10)))}}catch(e){console.error("Search error:",e)}finally{S(!1)}},300)},[]),W=async()=>{if(z){S(!0);try{let e=await o(z);e&&(A({name:e.name,brand:e.brand,servingSize:e.servingSize,calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat}),F(""))}catch(e){console.error("Barcode error:",e)}finally{S(!1)}}},A=e=>{let a={id:Date.now().toString(),name:e.name,brand:e.brand,servingSize:e.servingSize||"1 serving",calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat,fiber:e.fiber,sugar:e.sugar,sodium:e.sodium,timestamp:Date.now()};t(e=>[...e,a]),f(""),j([]),v([])};return(0,r.useEffect)(()=>{T(p,n)},[n,p,T]),(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-4 safe-area-top safe-area-bottom",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:e,className:"icon-btn",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"Meal Builder"})]}),(0,a.jsx)(g,{totals:P}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1",children:[{id:"search",label:"üîç Search",icon:"search"},{id:"restaurant",label:"üçî Restaurant",icon:"restaurant"},{id:"custom",label:"ü•© Whole Foods",icon:"custom"},{id:"scan",label:"üì∑ Barcode",icon:"scan"}].map(e=>(0,a.jsx)("button",{onClick:()=>d(e.id),className:`tab-button whitespace-nowrap ${n===e.id?"active":""}`,children:e.label},e.id))}),(0,a.jsx)("div",{className:"min-h-[200px]",children:"scan"===n?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"glass-card p-6 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-emerald-500/20 to-blue-500/20 flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),(0,a.jsx)("h3",{className:"font-semibold mb-1",children:"Enter Barcode"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Type the barcode number from the package"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:z,onChange:e=>F(e.target.value),placeholder:"e.g., 012345678905",className:"flex-1"}),(0,a.jsx)("button",{onClick:W,disabled:!z||w,className:"btn-primary !w-auto !px-6",children:w?"...":"Add"})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",value:p,onChange:e=>f(e.target.value),placeholder:"search"===n?"Search foods...":"restaurant"===n?"Search restaurants or menu items...":"Search whole foods (steak, chicken, etc)...",className:"w-full mb-4"}),w&&(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"spinner"})}),"search"===n&&b.length>0&&(0,a.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:b.map((e,r)=>(0,a.jsxs)("button",{onClick:()=>A(e),className:"w-full glass-card p-3 text-left hover:bg-white/5 flex items-center gap-3",children:[e.image&&(0,a.jsx)("img",{src:e.image,alt:"",className:"w-10 h-10 rounded-lg object-cover"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm truncate",children:e.name}),(0,a.jsxs)("div",{className:"flex gap-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:[e.calories," cal"]}),(0,a.jsxs)("span",{className:"text-emerald-400",children:[e.protein,"g P"]})]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-emerald-400 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})]},r))}),"restaurant"===n&&y.length>0&&(0,a.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:y.map((e,r)=>(0,a.jsxs)("button",{onClick:()=>B(e.restaurant),className:"w-full restaurant-card p-4 text-left flex items-center gap-3",style:{borderLeftColor:e.restaurant.color,borderLeftWidth:3},children:[(0,a.jsx)("span",{className:"text-2xl",children:e.restaurant.logo}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold",children:e.restaurant.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.items.length," items"]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},r))}),"custom"===n&&k.length>0&&(0,a.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:k.map((e,r)=>(0,a.jsxs)("button",{onClick:()=>L(e),className:"w-full glass-card p-3 text-left hover:bg-white/5 flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl w-10 text-center",children:e.emoji}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.category," ‚Ä¢ per 100g: ",e.per100g.calories," cal"]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},r))})]})}),s.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold text-gray-400",children:["Added (",s.length,")"]}),(0,a.jsx)("button",{onClick:()=>t([]),className:"text-xs text-red-400 hover:text-red-300",children:"Clear"})]}),s.map(e=>(0,a.jsx)(x,{item:e,onRemove:()=>t(a=>a.filter(a=>a.id!==e.id))},e.id))]}),C&&(0,a.jsx)(u,{restaurant:C,onAdd:e=>{A({name:e.name,servingSize:"1 serving",calories:e.calories,protein:e.protein,carbs:e.carbs,fat:e.fat}),B(null)},onClose:()=>B(null)}),M&&(0,a.jsx)(h,{food:M,onAdd:e=>{t(a=>[...a,e]),L(null)},onClose:()=>L(null)}),(0,a.jsx)("p",{className:"text-xs text-center text-gray-600 pt-4",children:"Data: Open Food Facts ‚Ä¢ 10 Restaurant Chains ‚Ä¢ 35+ Whole Foods"})]})}let f=[{name:"Titanium Dioxide",aliases:["E171","titanium oxide","CI 77891","titanium white"],risk:"Genotoxicity risk: potential DNA damage",euStatus:"Banned in EU since 2022",category:"Colorant"},{name:"Potassium Bromate",aliases:["E924","potassium bromate","bromate"],risk:"Known carcinogen linked to kidney and thyroid tumors",euStatus:"Banned in EU since 1990",category:"Flour Treatment"},{name:"Brominated Vegetable Oil",aliases:["BVO","brominated vegetable oil","brominated oil"],risk:"Thyroid toxin and neurological concerns",euStatus:"Banned in EU and Japan",category:"Emulsifier"},{name:"Propylparaben",aliases:["E217","propyl paraben","propyl 4-hydroxybenzoate"],risk:"Endocrine disruptor linked to hormone issues",euStatus:"Banned in EU food since 2006",category:"Preservative"},{name:"Red Dye No. 3",aliases:["Red 3","Erythrosine","E127","FD&C Red No. 3","red #3"],risk:"Linked to thyroid tumors in animal studies",euStatus:"Banned in EU food products",category:"Colorant"},{name:"Azodicarbonamide",aliases:["ADA","azodicarbonamide","E927a"],risk:"Respiratory sensitizer, linked to asthma",euStatus:"Banned in EU food (allowed in plastics)",category:"Flour Bleaching"},{name:"Red 40",aliases:["Allura Red","E129","FD&C Red No. 40","red #40","CI 16035"],risk:"Hyperactivity in children, requires EU warning label",euStatus:"Requires warning label in EU",category:"Colorant"},{name:"Yellow 5",aliases:["Tartrazine","E102","FD&C Yellow No. 5","yellow #5","CI 19140"],risk:"Hyperactivity in children, allergic reactions",euStatus:"Requires warning label in EU",category:"Colorant"},{name:"Yellow 6",aliases:["Sunset Yellow","E110","FD&C Yellow No. 6","yellow #6","CI 15985"],risk:"Hyperactivity in children, allergic reactions",euStatus:"Requires warning label in EU",category:"Colorant"},{name:"Blue 1",aliases:["Brilliant Blue","E133","FD&C Blue No. 1","blue #1","CI 42090"],risk:"Potential neurotoxicity concerns",euStatus:"Restricted use in EU",category:"Colorant"},{name:"BHA",aliases:["Butylated Hydroxyanisole","E320","BHA"],risk:"Possible carcinogen, endocrine disruptor",euStatus:"Restricted in EU",category:"Preservative"},{name:"BHT",aliases:["Butylated Hydroxytoluene","E321","BHT"],risk:"Possible carcinogen, liver effects",euStatus:"Restricted in EU",category:"Preservative"},{name:"TBHQ",aliases:["tert-Butylhydroquinone","TBHQ","E319"],risk:"Potential carcinogen, vision problems at high doses",euStatus:"Restricted in EU",category:"Preservative"},{name:"Olestra",aliases:["Olean","olestra"],risk:"Digestive issues, blocks vitamin absorption",euStatus:"Banned in EU and Canada",category:"Fat Substitute"},{name:"rBGH/rBST",aliases:["recombinant bovine growth hormone","rBGH","rBST","bovine somatotropin"],risk:"Increased IGF-1 levels, antibiotic resistance concerns",euStatus:"Banned in EU since 1990",category:"Hormone"},{name:"Ractopamine",aliases:["ractopamine","Paylean","Optaflexx"],risk:"Cardiovascular effects, banned in 160+ countries",euStatus:"Banned in EU since 1996",category:"Growth Promoter"},{name:"Arsenic-based drugs",aliases:["roxarsone","arsanilic acid","arsenic"],risk:"Carcinogen, accumulates in meat",euStatus:"Never approved in EU",category:"Animal Drug"},{name:"Carrageenan",aliases:["E407","carrageenan","Irish moss extract"],risk:"Inflammation concerns, digestive issues",euStatus:"Banned in EU infant formula",category:"Thickener"},{name:"Partially Hydrogenated Oils",aliases:["PHO","partially hydrogenated","trans fat","trans fats"],risk:"Trans fats increase heart disease risk",euStatus:"Strictly limited in EU (max 2%)",category:"Fat"},{name:"Sodium Nitrite",aliases:["E250","sodium nitrite","nitrite"],risk:"Forms carcinogenic nitrosamines",euStatus:"Restricted levels in EU",category:"Preservative"}];function b(){let[e,t]=(0,r.useState)("home"),[i,o]=(0,r.useState)(null),[c,l]=(0,r.useState)(!1),[m,d]=(0,r.useState)("dark"),[g,x]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{x(!0);let e=localStorage.getItem("macromap-theme");e&&d(e)},[]),(0,r.useEffect)(()=>{g&&(document.documentElement.setAttribute("data-theme",m),localStorage.setItem("macromap-theme",m))},[m,g]),g)?"meal-builder"===e?(0,a.jsx)("main",{className:"min-h-screen px-4 py-6",children:(0,a.jsx)(p,{onBack:()=>t("home")})}):"results"===e&&i?(0,a.jsx)("main",{className:"min-h-screen px-4 py-6 safe-area-top safe-area-bottom",children:(0,a.jsx)(n,{score:i.score,redFlags:i.redFlags,allIngredients:i.allIngredients,onReset:()=>{o(null),t("home")}})}):(0,a.jsxs)("main",{className:"min-h-screen px-4 py-6 safe-area-top safe-area-bottom",children:[(0,a.jsx)("header",{className:"max-w-lg mx-auto mb-8 fade-in",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shadow-lg shadow-emerald-500/20",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold gradient-text",children:"MacroMap"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Food Intelligence"})]})]}),(0,a.jsx)("button",{onClick:()=>d(e=>"dark"===e?"light":"dark"),className:"icon-btn",title:`Switch to ${"dark"===m?"light":"dark"} mode`,children:"dark"===m?(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})}),(0,a.jsxs)("div",{className:"max-w-lg mx-auto space-y-4",children:[(0,a.jsx)("button",{onClick:()=>t("meal-builder"),className:"w-full glass-card p-5 text-left hover:scale-[1.01] transition-transform fade-in",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 flex items-center justify-center shrink-0 shadow-lg shadow-emerald-500/20",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"Track Your Meal"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:"Search foods, scan barcodes, or add from restaurants"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-400",children:"üîç Search"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-amber-500/15 text-amber-400",children:"üçî Restaurants"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-500/15 text-blue-400",children:"ü•© Custom"})]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500 shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,a.jsx)("button",{onClick:()=>t("scanner"),className:"w-full glass-card p-5 text-left hover:scale-[1.01] transition-transform fade-in fade-in-delay-1",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-red-500/20 to-orange-500/20 flex items-center justify-center shrink-0",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-1",children:"Ingredient Scanner"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:"Check for EU-banned additives in your food"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-red-500/15 text-red-400",children:"Red Flags"}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-amber-500/15 text-amber-400",children:"EU vs US"})]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-500 shrink-0 mt-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,a.jsxs)("div",{className:"glass-card p-5 fade-in fade-in-delay-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsx)("h3",{className:"font-semibold text-sm text-gray-400",children:"Data Sources"})}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:"10"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Restaurants"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:"35+"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Whole Foods"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-400",children:"20"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"EU Banned"})]})]})]})]}),"scanner"===e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/95 z-40 overflow-auto",children:(0,a.jsx)("div",{className:"min-h-screen px-4 py-6 safe-area-top safe-area-bottom",children:(0,a.jsxs)("div",{className:"max-w-lg mx-auto",children:[(0,a.jsx)("button",{onClick:()=>t("home"),className:"icon-btn mb-4",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,a.jsx)("h2",{className:"text-xl font-bold gradient-text text-center mb-2",children:"Ingredient Scanner"}),(0,a.jsxs)("p",{className:"text-gray-400 text-sm text-center mb-6",children:["Paste ingredients to check for ",(0,a.jsx)("span",{className:"text-red-400",children:"banned"})," substances"]}),(0,a.jsx)(s,{onAnalyze:e=>{l(!0),setTimeout(()=>{let a=function(e){let a=e.toLowerCase().replace(/\([^)]*\)/g,e=>`, ${e.slice(1,-1)},`).replace(/contains less than \d+% of:?/gi,",").replace(/contains:?/gi,",").replace(/ingredients:?/gi,",").split(/[,;.]/).map(e=>e.trim()).filter(e=>e.length>1),r=[],s=new Set;for(let e of a)for(let a of f)for(let t of[a.name.toLowerCase(),...a.aliases.map(e=>e.toLowerCase())])if(e.includes(t)||t.includes(e)){s.has(a.name)||(s.add(a.name),r.push({name:a.name,risk:a.risk,euStatus:a.euStatus,foundAs:e}));break}return{score:Math.max(0,100-15*r.length),redFlags:r,allIngredients:a.filter(e=>e.length>2)}}(e);o({score:a.score,redFlags:a.redFlags,allIngredients:a.allIngredients}),t("results"),l(!1)},500)},isLoading:c})]})})}),(0,a.jsx)("footer",{className:"fixed bottom-0 left-0 right-0 py-3 text-center text-xs text-gray-600 bg-gradient-to-t from-black via-black/80 to-transparent safe-area-bottom",children:(0,a.jsx)("p",{children:"No API key needed ‚Ä¢ Open Food Facts"})})]}):(0,a.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"spinner"})})}e.s(["default",()=>b],31713)}]);